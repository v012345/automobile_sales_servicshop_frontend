(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e181fbb"],{"25f0":function(t,a,e){"use strict";var i=e("e330"),o=e("5e77").PROPER,n=e("6eeb"),s=e("825a"),r=e("3a9b"),c=e("577e"),u=e("d039"),l=e("ad6d"),v="toString",d=RegExp.prototype,p=d[v],_=i(l),f=u((function(){return"/a/b"!=p.call({source:"a",flags:"b"})})),h=o&&p.name!=v;(f||h)&&n(RegExp.prototype,v,(function(){var t=s(this),a=c(t.source),e=t.flags,i=c(void 0===e&&r(d,t)&&!("flags"in d)?_(t):e);return"/"+a+"/"+i}),{unsafe:!0})},"823a":function(t,a,e){},"8aab":function(t,a,e){"use strict";e("823a")},a29e:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.user.id&&t.activity.id?e("div",{staticClass:"card-container"},[e("van-tabs",{attrs:{type:"card"}},[e("van-tab",{attrs:{title:"可用的",name:"available"}},t._l(t.availableCoupons,(function(a){return e("div",{key:a.id,on:{click:function(e){return t.dealWithTheCoupon(a)}}},[e("Coupon",{attrs:{value:a.value,allow_to_use_at:t.activity.allow_to_use_at,expire_at:t.activity.expire_at,description:t.activity.description,available:"available"==a.state}})],1)})),0),e("van-tab",{attrs:{title:"分享的",name:"shared"}},t._l(t.sharedCoupons,(function(a){return e("div",{key:a.id,on:{click:function(e){return t.dealWithTheCoupon(a)}}},[e("Coupon",{attrs:{value:a.value,allow_to_use_at:t.activity.allow_to_use_at,expire_at:t.activity.expire_at,available:"available"==a.state}})],1)})),0),e("van-tab",{attrs:{title:"失效的",name:"expired"}},t._l(t.expiredCoupons,(function(a){return e("div",{key:a.id},[e("Coupon",{attrs:{value:a.value,allow_to_use_at:t.activity.allow_to_use_at,expire_at:t.activity.expire_at,available:!1}})],1)})),0)],1)],1):t._e(),e("div",[e("van-popup",{model:{value:t.showQrcode,callback:function(a){t.showQrcode=a},expression:"showQrcode"}},[e("van-image",{attrs:{src:t.qrcode}})],1)],1)])},o=[],n=e("5530"),s=(e("4de4"),e("d3b7"),e("25f0"),e("d399")),r=e("f43e"),c=e("2f62"),u={name:"Coupons",data:function(){return{qrcode:"",showQrcode:!1}},components:{Coupon:r["a"]},computed:Object(n["a"])(Object(n["a"])({},Object(c["b"])(["activity","user","config"])),{},{availableCoupons:function(){var t=this;return this.user.id&&this.activity.id?this.user.coupons.filter((function(a){return a.activity_id==t.activity.id&&t.$dayjs().isBefore(t.activity.expire_at)&&"normal"==a.type})):[]},sharedCoupons:function(){var t=this;return this.user.id&&this.activity.id?this.user.coupons.filter((function(a){return a.activity_id==t.activity.id&&t.$dayjs().isBefore(t.activity.expire_at)&&"shared"==a.type})):[]},expiredCoupons:function(){var t=this;return this.user.id&&this.activity.id?this.user.coupons.filter((function(a){return a.activity_id==t.activity.id&&!t.$dayjs().isBefore(t.activity.expire_at)})):[]}}),methods:{dealWithTheCoupon:function(t){if("available"==t.state)return this.qrcode=this.$qrcode.getQrBase64(t.id.toString()),void(this.showQrcode=!0);Object(s["a"])({message:"此券已经核销"})}}},l=u,v=(e("8aab"),e("2877")),d=Object(v["a"])(l,i,o,!1,null,"3dfef79a",null);a["default"]=d.exports},f43e:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"van-coupon",class:{"van-coupon--disabled":!t.available},staticStyle:{"margin-top":"1rem"}},[e("div",{staticClass:"van-coupon__content"},[e("div",{staticClass:"van-coupon__head"},[e("h2",{staticClass:"van-coupon__amount"},[t._v(t._s(t.value)),e("span",[t._v("元")])]),e("p",{staticClass:"van-coupon__condition"},[t._v("无使用门槛")])]),e("div",{staticClass:"van-coupon__body"},[e("p",{staticClass:"van-coupon__name"},[t._v("优惠券")]),e("p",{staticClass:"van-coupon__valid"},[t._v(" "+t._s(t.$dayjs(t.allow_to_use_at).format("YYYY-MM-DD"))+" 至 "+t._s(t.$dayjs(t.expire_at).format("YYYY-MM-DD"))+" ")])])]),e("p",{staticClass:"van-coupon__description"},[t._v(t._s(t.description))])])},o=[],n={name:"Coupon",props:["value","allow_to_use_at","expire_at","available","description"]},s=n,r=e("2877"),c=Object(r["a"])(s,i,o,!1,null,null,null);a["a"]=c.exports}}]);
//# sourceMappingURL=chunk-6e181fbb.658916a5.js.map