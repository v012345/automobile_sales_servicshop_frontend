(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25683a38"],{"47f8":function(t,a,i){"use strict";i("54de")},"54de":function(t,a,i){},a29e:function(t,a,i){"use strict";i.r(a);var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[t.user.id&&t.activity.id&&t.activityConfig.activity_id?i("div",{staticClass:"card-container"},[i("van-tabs",{attrs:{type:"card"}},[i("van-tab",{attrs:{title:"可用的",name:"available"}},t._l(t.availableCoupons,(function(a){return i("div",{key:a.id,on:{click:function(i){return t.dealWithTheCoupon(a)}}},[i("Coupon",{attrs:{value:t.activityConfig.normal_coupon_value,allow_to_use_at:t.activity.allow_to_use_at,expire_at:t.activity.expire_at,description:t.activityConfig.normal_coupon_description,available:"available"==a.state}})],1)})),0),i("van-tab",{attrs:{title:"分享的",name:"shared"}},t._l(t.sharedCoupons,(function(a){return i("div",{key:a.id,on:{click:function(i){return t.dealWithTheCoupon(a)}}},[i("Coupon",{attrs:{value:t.activityConfig.shared_coupon_value,allow_to_use_at:t.activity.allow_to_use_at,expire_at:t.activity.expire_at,description:t.activityConfig.shared_coupon_description,available:"available"==a.state}})],1)})),0),i("van-tab",{attrs:{title:"失效的",name:"expired"}},t._l(t.expiredCoupons,(function(a){return i("div",{key:a.id},["normal"==a.type?[i("Coupon",{attrs:{value:t.activityConfig.normal_coupon_value,allow_to_use_at:t.activity.allow_to_use_at,expire_at:t.activity.expire_at,description:t.activityConfig.normal_coupon_description,available:!1}})]:[i("Coupon",{attrs:{value:t.activityConfig.shared_coupon_value,allow_to_use_at:t.activity.allow_to_use_at,expire_at:t.activity.expire_at,description:t.activityConfig.shared_coupon_description,available:!1}})]],2)})),0)],1)],1):t._e(),i("div",[i("van-popup",{model:{value:t.showQrcode,callback:function(a){t.showQrcode=a},expression:"showQrcode"}},[i("van-image",{attrs:{src:t.qrcode}})],1)],1),i("div",{staticClass:"footer-nav"},[i("van-button",{attrs:{type:"primary",block:""},on:{click:function(a){return t.$router.back()}}},[t._v("返回首页 "),i("br"),t._v(" 已有人"+t._s(t.activity.sales_number)+"参与 ")]),i("div",{staticClass:"middle-button"},[i("van-button",{attrs:{type:"info",size:"large",block:""}},[t._v("关注公众号"),i("br"),t._v("获取更多好礼")])],1),i("van-button",{attrs:{type:"primary",block:""}},[t._v("Block 大大伟大Element")])],1)])},o=[],n=i("5530"),s=(i("4de4"),i("d3b7"),i("25f0"),i("d399")),c=i("f43e"),r=i("2f62"),u={name:"Coupons",data:function(){return{qrcode:"",showQrcode:!1}},components:{Coupon:c["a"]},computed:Object(n["a"])(Object(n["a"])({},Object(r["b"])(["activity","user","config","activityConfig"])),{},{availableCoupons:function(){var t=this;return this.user.id&&this.activity.id?this.user.coupons.filter((function(a){return a.activity_id==t.activity.id&&t.$dayjs().isBefore(t.activity.expire_at)&&"normal"==a.type})):[]},sharedCoupons:function(){var t=this;return this.user.id&&this.activity.id?this.user.coupons.filter((function(a){return a.activity_id==t.activity.id&&t.$dayjs().isBefore(t.activity.expire_at)&&"shared"==a.type})):[]},expiredCoupons:function(){var t=this;return this.user.id&&this.activity.id?this.user.coupons.filter((function(a){return a.activity_id==t.activity.id&&!t.$dayjs().isBefore(t.activity.expire_at)})):[]}}),methods:{dealWithTheCoupon:function(t){if("available"==t.state)return this.qrcode=this.$qrcode.getQrBase64(t.id.toString()),void(this.showQrcode=!0);Object(s["a"])({message:"此券已经核销"})}},created:function(){var t=this;this.$Echo.channel("4s").listen("Used",(function(a){a.user_id==t.user.id&&t.axios.post(t.$api+"v3/init",{activityId:localStorage.activityId,temporaryId:localStorage.temporaryId}).then((function(a){t.showQrcode=!1,t.$store.dispatch("init",a.data)}))}))}},l=u,v=(i("47f8"),i("2877")),d=Object(v["a"])(l,e,o,!1,null,"605cd86e",null);a["default"]=d.exports},f43e:function(t,a,i){"use strict";var e=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"van-coupon",class:{"van-coupon--disabled":!t.available},staticStyle:{"margin-top":"1rem"}},[i("div",{staticClass:"van-coupon__content"},[i("div",{staticClass:"van-coupon__head"},[i("h2",{staticClass:"van-coupon__amount"},[t._v(t._s(t.value)),i("span",[t._v("元")])]),i("p",{staticClass:"van-coupon__condition"},[t._v("无使用门槛")])]),i("div",{staticClass:"van-coupon__body"},[i("p",{staticClass:"van-coupon__name"},[t._v("优惠券")]),i("p",{staticClass:"van-coupon__valid"},[t._v(" "+t._s(t.$dayjs(t.allow_to_use_at).format("YYYY-MM-DD"))+" 至 "+t._s(t.$dayjs(t.expire_at).format("YYYY-MM-DD"))+" ")])])]),i("p",{staticClass:"van-coupon__description"},[t._v(t._s(t.description))])])},o=[],n={name:"Coupon",props:["value","allow_to_use_at","expire_at","available","description"]},s=n,c=i("2877"),r=Object(c["a"])(s,e,o,!1,null,null,null);a["a"]=r.exports}}]);
//# sourceMappingURL=chunk-25683a38.d6974b4f.js.map