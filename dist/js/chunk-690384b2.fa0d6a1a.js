(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-690384b2"],{a15b:function(i,t,e){"use strict";var n=e("23e7"),a=e("e330"),o=e("44ad"),r=e("fc6a"),s=e("a640"),d=a([].join),c=o!=Object,v=s("join",",");n({target:"Array",proto:!0,forced:c||!v},{join:function(i){return d(r(this),void 0===i?",":i)}})},d81d:function(i,t,e){"use strict";var n=e("23e7"),a=e("b727").map,o=e("1dde"),r=o("map");n({target:"Array",proto:!0,forced:!r},{map:function(i){return a(this,i,arguments.length>1?arguments[1]:void 0)}})},e46b:function(i,t,e){"use strict";e.r(t);var n=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticStyle:{width:"100vw",overflow:"hidden"}},[e("div",[e("van-image",{attrs:{width:"100vw",src:i.$backend+i.config.franchise_banner}})],1),e("div",[e("van-field",{attrs:{"is-link":"",readonly:"",label:"区域",placeholder:"区域选择"},on:{click:function(t){i.showCityPicker=!0}},model:{value:i.form.division,callback:function(t){i.$set(i.form,"division",t)},expression:"form.division"}}),e("van-field",{attrs:{label:"品牌"},model:{value:i.form.brand,callback:function(t){i.$set(i.form,"brand",t)},expression:"form.brand"}}),e("van-field",{attrs:{label:"店名"},model:{value:i.form.shop,callback:function(t){i.$set(i.form,"shop",t)},expression:"form.shop"}}),e("van-field",{attrs:{label:"姓名"},model:{value:i.form.name,callback:function(t){i.$set(i.form,"name",t)},expression:"form.name"}}),e("van-field",{attrs:{type:"tel",label:"手机"},model:{value:i.form.phone_number,callback:function(t){i.$set(i.form,"phone_number",t)},expression:"form.phone_number"}}),e("van-field",{attrs:{label:"职位"},model:{value:i.form.job_title,callback:function(t){i.$set(i.form,"job_title",t)},expression:"form.job_title"}}),e("van-button",{attrs:{type:"warning",block:""},on:{click:i.franchise}},[i._v("立即报名")])],1),e("div",[e("van-grid",{attrs:{direction:"horizontal","column-num":5}},[e("van-grid-item",{attrs:{text:"序号"}}),e("van-grid-item",{attrs:{text:"城市"}}),e("van-grid-item",{attrs:{text:"品牌"}}),e("van-grid-item",{attrs:{text:"售卡"}}),e("van-grid-item",{attrs:{text:"转介绍"}})],1),i._l(i.franchisees,(function(i,t){return e("van-grid",{key:i.id,attrs:{direction:"horizontal","column-num":5}},[e("van-grid-item",{attrs:{text:(t+1).toString()}}),e("van-grid-item",{attrs:{text:i.city}}),e("van-grid-item",{attrs:{text:i.brand}}),e("van-grid-item",{attrs:{text:i.sale_number.toString()}}),e("van-grid-item",{attrs:{text:parseInt(100*i.rate)+"%"}})],1)}))],2),e("div",[e("van-popup",{attrs:{position:"bottom"},model:{value:i.showBrandPicker,callback:function(t){i.showBrandPicker=t},expression:"showBrandPicker"}},[e("van-tree-select",{attrs:{items:i.brands,"active-id":i.activeId,"main-active-index":i.activeIndex},on:{"update:activeId":function(t){i.activeId=t},"update:active-id":function(t){i.activeId=t},"update:mainActiveIndex":function(t){i.activeIndex=t},"update:main-active-index":function(t){i.activeIndex=t},"click-item":i.selectBrand}})],1)],1),e("div",[e("van-popup",{attrs:{round:"",position:"bottom"},model:{value:i.showCityPicker,callback:function(t){i.showCityPicker=t},expression:"showCityPicker"}},[e("van-cascader",{attrs:{title:"区域选择",options:i.administrative_division_codes},on:{close:function(t){i.showCityPicker=!1},finish:i.onFinish},model:{value:i.code,callback:function(t){i.code=t},expression:"code"}})],1)],1)])},a=[],o=e("5530"),r=(e("a15b"),e("d81d"),e("b0c0"),e("d3b7"),e("159b"),e("2f62")),s=e("d399"),d={data:function(){return{form:{brand:void 0,shop:void 0,job_title:void 0,name:void 0,phone_number:void 0,division:void 0},brand:"",brands:[],activeId:2,activeIndex:0,showCityPicker:!1,showBrandPicker:!1,code:"",franchisees:[],administrative_division_codes:[]}},methods:{onFinish:function(i){var t=i.selectedOptions;this.showCityPicker=!1,this.form.division=t.map((function(i){return i.text})).join("/")},selectBrand:function(i){this.form.brand=i.text,this.showBrandPicker=!1},franchise:function(){var i=this,t=this.form,e=t.brand,n=t.shop,a=t.job_title,r=t.name,d=t.phone_number,c=t.division;e&&n&&a&&r&&d&&c?this.axios.post(this.$api+"franchisee/franchise",Object(o["a"])(Object(o["a"])({},this.form),{},{open_id:this.user.open_id,user_id:this.user.id})).then((function(){Object(s["a"])({message:"报名成功"}),i.form={brand:void 0,shop:void 0,job_title:void 0,name:void 0,phone_number:void 0,division:void 0}})):Object(s["a"])({message:"请输入完整信息"})}},computed:Object(o["a"])({},Object(r["b"])(["user","config"])),created:function(){var i=this;this.axios.get(this.$api+"franchisees").then((function(t){i.franchisees=t.data})),this.axios.get(this.$api+"brands").then((function(t){t.data.forEach((function(i){i.text=i.main_brand;var t=[],e=1;i.sub_brands.forEach((function(i){t.push({text:i,id:e++})})),i.children=t})),i.brands=t.data})),this.axios.get(this.$api+"administrative_division_codes").then((function(t){t.data.forEach((function(i){i.text=i.division,i.value=i.code,i.cities.length>0?(i.cities.forEach((function(i){i.text=i.division,i.value=i.code})),i.children=i.cities):i.children=[{text:i.division,value:i.code}]})),i.administrative_division_codes=t.data}))}},c=d,v=e("2877"),l=Object(v["a"])(c,n,a,!1,null,"21e335f2",null);t["default"]=l.exports}}]);
//# sourceMappingURL=chunk-690384b2.fa0d6a1a.js.map