{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.join.js","webpack:///./node_modules/core-js/modules/es.array.map.js","webpack:///./src/views/franchise/index.vue?f20f","webpack:///src/views/franchise/index.vue","webpack:///./src/views/franchise/index.vue?ffd7","webpack:///./src/views/franchise/index.vue"],"names":["$","uncurryThis","IndexedObject","toIndexedObject","arrayMethodIsStrict","un$Join","join","ES3_STRINGS","Object","STRICT_METHOD","target","proto","forced","separator","this","undefined","$map","map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","callbackfn","arguments","length","render","_vm","_h","$createElement","_c","_self","staticStyle","attrs","$backend","config","franchise_banner","on","$event","showCityPicker","model","value","form","callback","$$v","$set","expression","franchise","_v","_e","showBrandPicker","brands","activeId","activeIndex","selectBrand","administrative_division_codes","onFinish","code","staticRenderFns","component"],"mappings":"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","file":"js/chunk-690384b2.ac48e4e4.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar un$Join = uncurryThis([].join);\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.es/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return un$Join(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"100vw\",\"overflow\":\"hidden\"}},[_c('div',[_c('van-image',{attrs:{\"width\":\"100vw\",\"src\":_vm.$backend + _vm.config.franchise_banner}})],1),_c('div',[_c('van-field',{attrs:{\"is-link\":\"\",\"readonly\":\"\",\"label\":\"区域\",\"placeholder\":\"区域选择\"},on:{\"click\":function($event){_vm.showCityPicker = true}},model:{value:(_vm.form.division),callback:function ($$v) {_vm.$set(_vm.form, \"division\", $$v)},expression:\"form.division\"}}),_c('van-field',{attrs:{\"label\":\"品牌\"},model:{value:(_vm.form.brand),callback:function ($$v) {_vm.$set(_vm.form, \"brand\", $$v)},expression:\"form.brand\"}}),_c('van-field',{attrs:{\"label\":\"店名\"},model:{value:(_vm.form.shop),callback:function ($$v) {_vm.$set(_vm.form, \"shop\", $$v)},expression:\"form.shop\"}}),_c('van-field',{attrs:{\"label\":\"姓名\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}}),_c('van-field',{attrs:{\"type\":\"tel\",\"label\":\"手机\"},model:{value:(_vm.form.phone_number),callback:function ($$v) {_vm.$set(_vm.form, \"phone_number\", $$v)},expression:\"form.phone_number\"}}),_c('van-field',{attrs:{\"label\":\"职位\"},model:{value:(_vm.form.job_title),callback:function ($$v) {_vm.$set(_vm.form, \"job_title\", $$v)},expression:\"form.job_title\"}}),_c('van-button',{attrs:{\"type\":\"warning\",\"block\":\"\"},on:{\"click\":_vm.franchise}},[_vm._v(\"立即报名\")])],1),(false)?_c('div',[_c('van-grid',{attrs:{\"direction\":\"horizontal\",\"column-num\":5}},[_c('van-grid-item',{attrs:{\"text\":\"序号\"}}),_c('van-grid-item',{attrs:{\"text\":\"城市\"}}),_c('van-grid-item',{attrs:{\"text\":\"品牌\"}}),_c('van-grid-item',{attrs:{\"text\":\"售卡\"}}),_c('van-grid-item',{attrs:{\"text\":\"转介绍\"}})],1),_vm._l((_vm.franchisees),function(franchisee,i){return _c('van-grid',{key:franchisee.id,attrs:{\"direction\":\"horizontal\",\"column-num\":5}},[_c('van-grid-item',{attrs:{\"text\":(i + 1).toString()}}),_c('van-grid-item',{attrs:{\"text\":franchisee.city}}),_c('van-grid-item',{attrs:{\"text\":franchisee.brand}}),_c('van-grid-item',{attrs:{\"text\":franchisee.sale_number.toString()}}),_c('van-grid-item',{attrs:{\"text\":parseInt(franchisee.rate * 100) + '%'}})],1)})],2):_vm._e(),_c('div',[_c('van-popup',{attrs:{\"position\":\"bottom\"},model:{value:(_vm.showBrandPicker),callback:function ($$v) {_vm.showBrandPicker=$$v},expression:\"showBrandPicker\"}},[_c('van-tree-select',{attrs:{\"items\":_vm.brands,\"active-id\":_vm.activeId,\"main-active-index\":_vm.activeIndex},on:{\"update:activeId\":function($event){_vm.activeId=$event},\"update:active-id\":function($event){_vm.activeId=$event},\"update:mainActiveIndex\":function($event){_vm.activeIndex=$event},\"update:main-active-index\":function($event){_vm.activeIndex=$event},\"click-item\":_vm.selectBrand}})],1)],1),_c('div',[_c('van-popup',{attrs:{\"round\":\"\",\"position\":\"bottom\"},model:{value:(_vm.showCityPicker),callback:function ($$v) {_vm.showCityPicker=$$v},expression:\"showCityPicker\"}},[_c('van-cascader',{attrs:{\"title\":\"区域选择\",\"options\":_vm.administrative_division_codes},on:{\"close\":function($event){_vm.showCityPicker = false},\"finish\":_vm.onFinish},model:{value:(_vm.code),callback:function ($$v) {_vm.code=$$v},expression:\"code\"}})],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div style=\"width:100vw;overflow:hidden\">\r\n        <div>\r\n            <van-image width=\"100vw\" :src=\"$backend + config.franchise_banner\" />\r\n        </div>\r\n        <div>\r\n            <van-field v-model=\"form.division\" is-link readonly label=\"区域\" placeholder=\"区域选择\"\r\n                @click=\"showCityPicker = true\" />\r\n            <!-- <van-field\r\n                v-model=\"form.brand\"\r\n                is-link\r\n                readonly\r\n                label=\"品牌\"\r\n                placeholder=\"品牌选择\"\r\n                @click=\"showBrandPicker = true\"\r\n            />-->\r\n            <van-field v-model=\"form.brand\" label=\"品牌\" />\r\n            <van-field v-model=\"form.shop\" label=\"店名\" />\r\n            <van-field v-model=\"form.name\" label=\"姓名\" />\r\n            <van-field v-model=\"form.phone_number\" type=\"tel\" label=\"手机\" />\r\n            <van-field v-model=\"form.job_title\" label=\"职位\" />\r\n            <!-- <van-field label=\"职位\">\r\n                <template #input>\r\n                    <van-radio-group v-model=\"form.job_title\" direction=\"horizontal\">\r\n                        <van-radio name=\"店总\">店总</van-radio>\r\n                        <van-radio name=\"市场\">市场</van-radio>\r\n                        <van-radio name=\"售后\">售后</van-radio>\r\n                        <van-radio name=\"其他\">其他</van-radio>\r\n                    </van-radio-group>\r\n                </template>\r\n            </van-field>-->\r\n\r\n            <van-button @click=\"franchise\" type=\"warning\" block>立即报名</van-button>\r\n        </div>\r\n        <div v-if=\"false\">\r\n            <van-grid direction=\"horizontal\" :column-num=\"5\">\r\n                <van-grid-item text=\"序号\" />\r\n                <van-grid-item text=\"城市\" />\r\n                <van-grid-item text=\"品牌\" />\r\n                <van-grid-item text=\"售卡\" />\r\n                <van-grid-item text=\"转介绍\" />\r\n            </van-grid>\r\n            <van-grid v-for=\"(franchisee, i) in franchisees\" :key=\"franchisee.id\" direction=\"horizontal\"\r\n                :column-num=\"5\">\r\n                <van-grid-item :text=\"(i + 1).toString()\" />\r\n                <van-grid-item :text=\"franchisee.city\" />\r\n                <van-grid-item :text=\"franchisee.brand\" />\r\n                <van-grid-item :text=\"franchisee.sale_number.toString()\" />\r\n                <van-grid-item :text=\"parseInt(franchisee.rate * 100) + '%'\" />\r\n            </van-grid>\r\n        </div>\r\n        <div>\r\n            <van-popup v-model=\"showBrandPicker\" position=\"bottom\">\r\n                <!-- <van-search v-model=\"brand\" placeholder=\"Placeholder\" /> -->\r\n                <van-tree-select :items=\"brands\" :active-id.sync=\"activeId\" :main-active-index.sync=\"activeIndex\"\r\n                    @click-item=\"selectBrand\" />\r\n            </van-popup>\r\n        </div>\r\n        <div>\r\n            <van-popup v-model=\"showCityPicker\" round position=\"bottom\">\r\n                <van-cascader v-model=\"code\" title=\"区域选择\" :options=\"administrative_division_codes\"\r\n                    @close=\"showCityPicker = false\" @finish=\"onFinish\" />\r\n            </van-popup>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport { Toast } from \"vant\";\r\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            form: {\r\n                brand: undefined,\r\n                shop: undefined,\r\n                job_title: undefined,\r\n                name: undefined,\r\n                phone_number: undefined,\r\n                division: undefined\r\n            },\r\n            brand: \"\",\r\n            brands: [],\r\n            activeId: 2,\r\n            activeIndex: 0,\r\n            showCityPicker: false,\r\n            showBrandPicker: false,\r\n            code: \"\",\r\n            franchisees: [],\r\n            administrative_division_codes: [],\r\n\r\n        }\r\n    },\r\n    methods: {\r\n        onFinish({ selectedOptions }) {\r\n            this.showCityPicker = false;\r\n            this.form.division = selectedOptions.map((option) => option.text).join('/');\r\n        },\r\n        selectBrand(e) {\r\n            this.form.brand = e.text\r\n            this.showBrandPicker = false\r\n\r\n        },\r\n        franchise() {\r\n            const { brand, shop, job_title, name, phone_number, division } = this.form\r\n            if (!(brand && shop && job_title && name && phone_number && division)) {\r\n                Toast({ message: \"请输入完整信息\" })\r\n                return\r\n            }\r\n            this.axios.post(this.$api + \"franchisee/franchise\", {\r\n                ...this.form,\r\n                open_id: this.user.open_id,\r\n                user_id: this.user.id,\r\n\r\n            }).then(() => {\r\n                Toast({ message: \"报名成功\" })\r\n                this.form = {\r\n                    brand: undefined,\r\n                    shop: undefined,\r\n                    job_title: undefined,\r\n                    name: undefined,\r\n                    phone_number: undefined,\r\n                    division: undefined\r\n                }\r\n            })\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState(['user', \"config\"]),\r\n    },\r\n    created() {\r\n        if (localStorage.getItem(\"franchisees\")) {\r\n            this.franchisees = JSON.parse(localStorage.getItem(\"franchisees\"));\r\n        }\r\n        this.axios.get(this.$api + \"franchisees\").then((response) => {\r\n            this.franchisees = response.data\r\n            localStorage.setItem(\"franchisees\", JSON.stringify(response.data))\r\n            // console.log(response.data);\r\n        })\r\n        this.axios.get(this.$api + \"brands\").then((response) => {\r\n            // \r\n            response.data.forEach(e => {\r\n                e.text = e.main_brand\r\n                let temp = [];\r\n                let id = 1;\r\n                e.sub_brands.forEach(b => {\r\n                    temp.push({\r\n                        text: b,\r\n                        id: id++\r\n                    })\r\n                })\r\n                e.children = temp;\r\n            })\r\n            this.brands = response.data\r\n        })\r\n        this.axios.get(this.$api + \"administrative_division_codes\").then((response) => {\r\n            response.data.forEach(element => {\r\n                element.text = element.division\r\n                element.value = element.code\r\n                if (element.cities.length > 0) {\r\n                    element.cities.forEach((c) => {\r\n                        c.text = c.division\r\n                        c.value = c.code\r\n                    })\r\n                    element.children = element.cities\r\n                } else {\r\n                    element.children = [\r\n                        { text: element.division, value: element.code }\r\n                    ]\r\n                }\r\n            });\r\n            this.administrative_division_codes = response.data\r\n        })\r\n\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n// /deep/ van-grid van-hai\r\n// /deep/ van-grid van-hai\r\n// /deep/ van-grid van-hairline--top {\r\n//     &:first-child {\r\n//         width: 10px;\r\n//     }\r\n// }\r\n// /deep/ .van-grid-item__text {\r\n//     white-space: nowrap;\r\n// }\r\n/deep/ .van-grid-item__content {\r\n    padding: 8px 0px;\r\n}\r\n\r\n/deep/ .van-grid-item__text {\r\n    font-size: 0.65rem;\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=b9268030&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b9268030\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}