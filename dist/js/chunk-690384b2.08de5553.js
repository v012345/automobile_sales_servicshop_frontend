(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-690384b2"],{a15b:function(t,i,e){"use strict";var n=e("23e7"),a=e("e330"),o=e("44ad"),r=e("fc6a"),s=e("a640"),c=a([].join),d=o!=Object,l=s("join",",");n({target:"Array",proto:!0,forced:d||!l},{join:function(t){return c(r(this),void 0===t?",":t)}})},d81d:function(t,i,e){"use strict";var n=e("23e7"),a=e("b727").map,o=e("1dde"),r=o("map");n({target:"Array",proto:!0,forced:!r},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},e46b:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticStyle:{width:"100vw",overflow:"hidden"}},[e("div",[e("van-image",{attrs:{width:"100vw",src:t.$backend+t.config.franchise_banner}})],1),e("div",[e("van-field",{attrs:{"is-link":"",readonly:"",label:"区域",placeholder:"区域选择"},on:{click:function(i){t.showCityPicker=!0}},model:{value:t.form.division,callback:function(i){t.$set(t.form,"division",i)},expression:"form.division"}}),e("van-field",{attrs:{label:"品牌"},model:{value:t.form.brand,callback:function(i){t.$set(t.form,"brand",i)},expression:"form.brand"}}),e("van-field",{attrs:{label:"店名"},model:{value:t.form.shop,callback:function(i){t.$set(t.form,"shop",i)},expression:"form.shop"}}),e("van-field",{attrs:{label:"姓名"},model:{value:t.form.name,callback:function(i){t.$set(t.form,"name",i)},expression:"form.name"}}),e("van-field",{attrs:{type:"tel",label:"手机"},model:{value:t.form.phone_number,callback:function(i){t.$set(t.form,"phone_number",i)},expression:"form.phone_number"}}),e("van-field",{attrs:{label:"职位"},model:{value:t.form.job_title,callback:function(i){t.$set(t.form,"job_title",i)},expression:"form.job_title"}}),e("van-button",{attrs:{type:"warning",block:""},on:{click:t.franchise}},[t._v("立即报名")])],1),e("div",[e("van-grid",{attrs:{direction:"horizontal","column-num":5}},[e("van-grid-item",{attrs:{text:"序号"}}),e("van-grid-item",{attrs:{text:"城市"}}),e("van-grid-item",{attrs:{text:"品牌"}}),e("van-grid-item",{attrs:{text:"售卡"}}),e("van-grid-item",{attrs:{text:"转介绍"}})],1),t._l(t.franchisees,(function(t,i){return e("van-grid",{key:t.id,attrs:{direction:"horizontal","column-num":5}},[e("van-grid-item",{attrs:{text:(i+1).toString()}}),e("van-grid-item",{attrs:{text:t.city}}),e("van-grid-item",{attrs:{text:t.brand}}),e("van-grid-item",{attrs:{text:t.sale_number.toString()}}),e("van-grid-item",{attrs:{text:parseInt(100*t.rate)+"%"}})],1)}))],2),e("div",[e("van-popup",{attrs:{position:"bottom"},model:{value:t.showBrandPicker,callback:function(i){t.showBrandPicker=i},expression:"showBrandPicker"}},[e("van-tree-select",{attrs:{items:t.brands,"active-id":t.activeId,"main-active-index":t.activeIndex},on:{"update:activeId":function(i){t.activeId=i},"update:active-id":function(i){t.activeId=i},"update:mainActiveIndex":function(i){t.activeIndex=i},"update:main-active-index":function(i){t.activeIndex=i},"click-item":t.selectBrand}})],1)],1),e("div",[e("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.showCityPicker,callback:function(i){t.showCityPicker=i},expression:"showCityPicker"}},[e("van-cascader",{attrs:{title:"区域选择",options:t.administrative_division_codes},on:{close:function(i){t.showCityPicker=!1},finish:t.onFinish},model:{value:t.code,callback:function(i){t.code=i},expression:"code"}})],1)],1)])},a=[],o=e("5530"),r=(e("a15b"),e("d81d"),e("b0c0"),e("e9c4"),e("d3b7"),e("159b"),e("2f62")),s=e("d399"),c={data:function(){return{form:{brand:void 0,shop:void 0,job_title:void 0,name:void 0,phone_number:void 0,division:void 0},brand:"",brands:[],activeId:2,activeIndex:0,showCityPicker:!1,showBrandPicker:!1,code:"",franchisees:[],administrative_division_codes:[]}},methods:{onFinish:function(t){var i=t.selectedOptions;this.showCityPicker=!1,this.form.division=i.map((function(t){return t.text})).join("/")},selectBrand:function(t){this.form.brand=t.text,this.showBrandPicker=!1},franchise:function(){var t=this,i=this.form,e=i.brand,n=i.shop,a=i.job_title,r=i.name,c=i.phone_number,d=i.division;e&&n&&a&&r&&c&&d?this.axios.post(this.$api+"franchisee/franchise",Object(o["a"])(Object(o["a"])({},this.form),{},{open_id:this.user.open_id,user_id:this.user.id})).then((function(){Object(s["a"])({message:"报名成功"}),t.form={brand:void 0,shop:void 0,job_title:void 0,name:void 0,phone_number:void 0,division:void 0}})):Object(s["a"])({message:"请输入完整信息"})}},computed:Object(o["a"])({},Object(r["b"])(["user","config"])),created:function(){var t=this;localStorage.getItem("franchisees")&&(this.franchisees=JSON.parse(localStorage.getItem("franchisees"))),this.axios.get(this.$api+"franchisees").then((function(i){t.franchisees=i.data,localStorage.setItem("franchisees",JSON.stringify(i.data))})),this.axios.get(this.$api+"brands").then((function(i){i.data.forEach((function(t){t.text=t.main_brand;var i=[],e=1;t.sub_brands.forEach((function(t){i.push({text:t,id:e++})})),t.children=i})),t.brands=i.data})),this.axios.get(this.$api+"administrative_division_codes").then((function(i){i.data.forEach((function(t){t.text=t.division,t.value=t.code,t.cities.length>0?(t.cities.forEach((function(t){t.text=t.division,t.value=t.code})),t.children=t.cities):t.children=[{text:t.division,value:t.code}]})),t.administrative_division_codes=i.data}))}},d=c,l=e("2877"),v=Object(l["a"])(d,n,a,!1,null,"38f77358",null);i["default"]=v.exports}}]);
//# sourceMappingURL=chunk-690384b2.08de5553.js.map